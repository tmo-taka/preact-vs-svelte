# preact-vs-svelte

## 目的
今回、弊社としてはVueでの開発がメインとなってきておりますが、Nuxt3移行の時に下記部分を感じ頂いたかと思います。
- Reactよりの設計思想になってきている
- ライブラリの不安定さ

このことから現状でも弊社にはVueが適切なのか？他に適切なライブラリがあるか？を調査しました。

今回調査したのは下記です。
- Preact
　-　Reactから派生したライブラリでReactに比べ軽量のところがポイント
- Svlete
　-　前からあるライブラリではあるが、昨今本などもでてまた注目を浴びている

## preactとsvleteについて

下記が過去3ヶ月のトレンド結果です。（わかりやすいようにVueとReactも含めております。）
![image](https://github.com/tmo-taka/preact-vs-svelte/assets/45462276/d0a6100c-0ba8-412b-a4e7-5c8dbef61190)

### 比較表
|                  | Preact              | Svlete          | 
| ---------------- | ------------------- | --------------- | 
| バンドルサイズ   |                     |                 | 
| レンダリング方法 | 仮想DOM             | 実DOM           | 
| SSR実現性        | 可（Preact + Vike） | 可（SvelteKit） | 
| storeによる実装  | 可能                | 可能            | 

### Preactについて
まず今回Reactではなく、Preactを押しているのかというというと下記理由です。

#### メリット
 - :+1: Reactに比べ軽量という点 
   - Preact:9.5kB React124.1kB(本体：6.4kB + ract-dom:114.6kB)
 - :+1: Reactではネストされたコンポーネントに対して描画効率を考えmemo化等複雑化してしまう部分で少し楽になる点
   - Preactから発信された`Signals`というものでpropsされた値を使っていないところには勝手に伝達されない
  
**まとめるとReactに比べ、軽量で、少しマイルドに書けます。**
デメリットもあります。

#### デメリット
 - :-1: Reactと互換性があるとは言われているが、完全にそうではない点
   - Reactで使用可能なライブラリがPreactで使用できるかと言われるとそうでもない、省略されている可能性もあり。(Vikeもそうでした。)
   - 実際に試してみる必要あり。

 - :-1: SSRでの場合、実装に工夫が必要となる点
   -　[preact-render-to-string](https://github.com/preactjs/preact-render-to-string) か [Vike] (https://vike.dev/)を使用する必要あり。
   - そのため学習コスト及び調査が複雑。

### Sveleteについて
こちらは実DOMで最近勢いが増してきているものです。

#### メリット
 - :+1: SSR、SSGがデフォルトで用意されているフレームワーク「Svelte.kit」が用意されている。
   - ドキュメントも充実している、割とVikeに近いフォルダ、ファイル構成。
　　- :+1: アクセシビリティの向上を図るようなコーディングができる
   - from要素にactionというものをつけてsubmitをした際にAPIアクセスできるようにしたり、submit時にページ遷移をrejectも設定で可能
 - :+1: サーバーサイド実行、クライアント実行がファイルによって分かれおり、どこで実行されいてるかが一目瞭然（下記例）
```
test　（testというpathにアクセスした場合に下記ファイルをそれぞれ実行）
├── +page.server.ts 　　#　サーバ側でのみ実行　
├── +page.ts         # レンダリング前に実行　（サーバー/クライアントどちらでも実行されうる）
└── +page.svelte     #　　上記それぞれのデータを受け取りレンダリングするファイル
```


  
  
  




